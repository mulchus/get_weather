# GET WEATHER

Это веб-сервис для получения краткой информации о текущей погоде в населенном пункте с помощью [OpenWeatherMap](https://openweathermap.org/api/one-call-3#start).


## Установка и запуск

Проект запускается в Docker окружении. Для запуска проекта вам понадобятся консольный Git, Docker и Docker Compose. 
Инструкции по их установке смотрите на официальных сайтах:
- [Git SCM](https://git-scm.com/)
- [Get Started with Docker](https://www.docker.com/get-started/)
- [Docker Desktop для Windows](https://www.docker.com/products/docker-desktop/)

Склонируйте репозиторий к себе на локальную машину:
```shell
git clone https://github.com/mulchus/get_weather.git
```

### Переменные окружения

Часть настроек проекта берётся из переменных окружения.  
Чтобы их определить, создайте файл `.env` в корне проекта и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ = значение`:  
- `WEATHER_API_KEY=API_ключ_сервиса_погоды_OpenWeatherMap`. Как получить API ключ смотрите в [документации](https://openweathermap.org/api/one-call-3#start).

### Запуск

Перейдите в папку с проектом и выполните команду сборки и запуска проекта:

```shell
$ bash deploy.sh
```
Эта команда включает в себя:
- сборку докер-образов с помощью Docker Сompose:

```shell
$ docker compose build
```
Первая сборка может занять продолжительное время в зависимости от интернет-соединения.

- миграции базы данных:

```shell
$ docker compose run --rm django ./manage.py migrate
```

- наполнения базы данных. При запуске формируется база данных наименований населенных пунктов России и стран бывшего СНГ, что может занять до 3 минут. 

```shell
$ docker compose run --rm django ./manage.py fill_db
```
По завершении формирования выводится сообщение `Load ___ locations`.

- запуск проекта:

```shell
$ docker compose up
```
Сервис погоды доступен по адресу [127.0.0.1:8000](http://127.0.0.1:8000).


В отдельном терминале создайте администратора для входа в административную панель:

```shell
$ docker compose run --rm django ./manage.py createsuperuser
```
Последовательно введите запрашиваемые данные.  
Внимание! При установке пароля вводимые символы не отображаются. 

Административная панель проекта доступна по адресу [127.0.0.1:8000/admin](http://127.0.0.1:8000/admin). Здесь можно редактировать название локации


## Краткое описание проекта

Это MVP версия проекта.  
Проект реализован на веб-фреймворке Django в расчете на дальнейшее развитие для удобства управления данными в админке.  
Проект разворачивается в докер контейнере.  
Переменные окружения проекта валидируются с помощью [Pydantic](https://pydantic-docs.helpmanual.io/).
В сессиях (куках) юзеров сохраняется информация о последнем выбранном городе, а также количество выполненных поисков.
Срок хранения данных в сессиях по умолчанию 1 месяц от последнего действия на сайте.

В проекте реализовано согласно дополнительного ТЗ:
- написаны тесты
- проект помещено в докер контейнер
- сделано автодополнение (подсказки) при вводе города
- при повторном посещении сайта предложено посмотреть погоду в городе, в котором пользователь уже смотрел ранее
- сохраняется история поиска для каждого пользователя
- создан эндпоинт API, показывающий сколько раз вводили какой город, можно также посмотреть по кнопке


## Перспективы развития проекта

1. Подключение БД PostgreSQL для обеспечения регистронезависимого разноязычного поиска населенных пунктов в автодополнении.
2. Замена принтов на логгирование.
2. Расширение в БД названий населенных пунктов согласно мировой локации.
3. Добавление подключения к иным метеосервисам для получения и отображения более расширенного прогноза погоды.


## Цели проекта

Создание сервиса получения погоды через API сторонних метеосервисов.
